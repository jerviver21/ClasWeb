
<html  xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
     >


    <f:view>

        <ui:composition template="../#{applicationController.plan2}">
            <ui:define name="contenido">
                <div style="height: 450px">
                <h:form id="form2">
                    <span class="menu">
                        <p:commandLink action="#{pubImpresoController.verPedido}" value="Ver Pedido" ajax="false"/>
                    </span>
                </h:form>
                    <br/>
                    <span class="titulo">Publique su Clasificado</span>
                    <br/>
               <h:form id="form" prependId="false">
                    <p:growl id="msgs" />   
                    <p:panelGrid style="margin-top:20px">
                        <p:row>
                            <p:column><h:outputLabel  value="Medio de Publicación: " /></p:column>
                            <p:column>
                                <h:selectOneMenu id="tipo_pub" value="#{pubImpresoController.clasificado.subtipoPublicacion.id}">
                                    <p:ajax update="@form"/>
                                    <f:selectItems  value="#{pubImpresoController.subtiposPublicacion}"/>
                                </h:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="tipo_pub"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="tipo_pub"/></p:column>
                        </p:row>
                        
                        
                        <p:row>
                            <p:column><h:outputLabel  value="Tipo de Clasificado:" /></p:column>
                            <p:column><h:selectOneMenu id="tipo" value="#{pubImpresoController.clasificado.tipo.id}" valueChangeListener="#{pubImpresoController.cambiarTipo}">
                            <p:ajax update="@form"/>
                            <f:selectItems  value="#{pubImpresoController.tipos}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="tipo"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="tipo"/></p:column>
                        </p:row>
                        
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.subtipo1}">
                            <p:column><h:outputLabel  value="#{pubImpresoController.nsubtipo1}"/></p:column>
                            <p:column><h:selectOneMenu id="sub1" value="#{pubImpresoController.clasificado.subtipo1.id}">
                                <p:ajax update="@form"/>
                                <f:selectItems  value="#{pubImpresoController.subtipos1}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="sub1"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="sub1"/></p:column>
                        </p:row>
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.subtipo2}">
                            <p:column><h:outputLabel  value="#{pubImpresoController.nsubtipo2}"/></p:column>
                            <p:column><h:selectOneMenu id="sub2" value="#{pubImpresoController.clasificado.subtipo2.id}">
                                <p:ajax update="@form"/>
                                <f:selectItems  value="#{pubImpresoController.subtipos2}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="sub2"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="sub2"/></p:column>
                        </p:row>
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.subtipo3}">
                            <p:column><h:outputLabel  value="#{pubImpresoController.nsubtipo3}"/></p:column>
                            <p:column><h:selectOneMenu id="sub3" value="#{pubImpresoController.clasificado.subtipo3.id}">
                                <p:ajax update="@form"/>
                                <f:selectItems  value="#{pubImpresoController.subtipos3}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="sub3"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="sub3"/></p:column>
                        </p:row>
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.subtipo4}">
                            <p:column><h:outputLabel  value="#{pubImpresoController.nsubtipo4}"/></p:column>
                            <p:column><h:selectOneMenu id="sub4" value="#{pubImpresoController.clasificado.subtipo4.id}">
                                <p:ajax update="@form"/>
                                <f:selectItems  value="#{pubImpresoController.subtipos4}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="sub4"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="sub4"/></p:column>
                        </p:row>
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.subtipo5}">
                            <p:column><h:outputLabel  value="#{pubImpresoController.nsubtipo5}"/></p:column>
                            <p:column><h:selectOneMenu id="sub5" value="#{pubImpresoController.clasificado.subtipo5.id}">
                                <p:ajax update="@form"/>
                                <f:selectItems  value="#{pubImpresoController.subtipos5}"/>
                            </h:selectOneMenu></p:column>
                            <p:column><p:message for="sub5"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="sub5"/></p:column>
                        </p:row>
                        
                        <p:row rendered="#{pubImpresoController.tipoClasificado.campos.valor}">
                            <p:column>
                                <h:outputLabel  value="PRECIO:" rendered="#{pubImpresoController.clasificado.tipo.id eq 1 or pubImpresoController.clasificado.tipo.id eq 3}"/>
                                <h:outputLabel  value="SALARIO:" rendered="#{pubImpresoController.clasificado.tipo.id eq 2}" />
                            </p:column>
                            <p:column>
                                <p:inputText id="valorof1" value="#{pubImpresoController.clasificado.valorOferta}">
                                    <p:ajax update="@form"/>
                                </p:inputText>
                                <p:watermark value="Digite el entero sin signos, puntos, ni comas" for="valorof1"/>
                            </p:column>
                            <p:column>
                                <h:selectOneMenu id="moneda" value="#{pubImpresoController.clasificado.moneda.id}">
                                    <p:ajax update="@form"/>
                                    <f:selectItems  value="#{pubImpresoController.monedas}"/>
                                </h:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="valorof1"/></p:column>
                        </p:row>
                        
                        <p:row>
                            <p:column><h:outputLabel  value="Fecha Inicial de Publicación: "/></p:column>
                            <p:column>
                                <p:calendar id="fechaini" value="#{pubImpresoController.clasificado.fechaIni}" size="40" 
                                            required="true" mindate="#{pubImpresoController.minDate}" pattern="yyyy-MM-dd">
                                    <p:ajax event="dateSelect" update="@form"/>
                                </p:calendar>
                            </p:column>
                            <p:column><p:message for="fechaini"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="fechaini"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel  value="Fecha Final de Publicación:  "/></p:column>
                            <p:column>
                                <p:calendar id="fechafin" value="#{pubImpresoController.clasificado.fechaFin}" size="40" 
                                            required="true" mindate="#{pubImpresoController.clasificado.fechaIni}" pattern="yyyy-MM-dd">
                                    <p:ajax event="dateSelect"/>
                                </p:calendar>
                            </p:column>
                            <p:column><p:message for="fechafin"/></p:column>
                            <p:column><p:watermark value="Seleccione..." for="fechafin"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel  value="Clasificado: "/></p:column>
                            <p:column>
                                <p:inputTextarea id="clasificado" value="#{pubImpresoController.clasificado.clasificado}" cols="40" required="true">
                                    <p:ajax update="@form"/>
                                </p:inputTextarea>
                            </p:column>
                            <p:column><p:message for="clasificado"/></p:column>
                            <p:column><p:watermark value="Escriba exactamente lo que quiere que se imprima en el clasificado" for="clasificado"/></p:column>
                        </p:row>
                    </p:panelGrid>
                    
                    <br/>
                    <p:commandButton value="Guardar" type="button" onclick="confirmation.show()"/>
                    
                    <p:confirmDialog id="confirm" message="#{pubImpresoController.clasificado}" severity="info"
                                     header="Así se publicará su clasificado: "  widgetVar="confirmation" width="400" height="100"  >  
                        <p:commandButton id="confirmbtn2" value="Si, Estoy de acuerdo"  oncomplete="confirmation.hide()"  ajax="false"
                                         action="#{pubImpresoController.procesar}"/>  
                        <p:commandButton id="declinebtn" value="No" onclick="confirmation.hide()" type="button" />  
                    </p:confirmDialog>
                </h:form>
                </div>
            </ui:define>
        </ui:composition>
    </f:view>

</html>
